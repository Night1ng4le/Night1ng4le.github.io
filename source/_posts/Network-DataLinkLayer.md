---
title: Network - 数链层
categories: [CS base]
tags: [Network]
---

介质访问控制相关，随手笔记，方便我自己找ovo，

<!-- more -->
#### 性能分析相关
- 吞吐率S
	- 在发送时间内发送成功的平均帧数
	- S越大，信道利用率越高
	- 0 < S < 1
- 运载负载/网络负载G
	- 一个帧时内所有通信站总共发送的帧平均值（包括原发帧和重发帧）
	- G ≥ S
	- G = S：无冲突；G > S：有冲突；G > 1：冲突频繁

### 介质访问控制
#### MAC子层概述
用于决定广播信道中信道分配的协议属于MAC子层
- 数据通信的三种方式
	- 单播
	- 广播
	- 组播
- 局域网中主要采用在共享信道上的`广播`
- 介质访问控制主要解决：某一时刻由哪个工作站使用共享信道的问题
- 介质访问控制分静态和动态：静态指各种多路复用，动态见下文

#### 多路复用
主要思路：分时、分频、分码
- FDM（频分多路复用 - 分带宽）
	- 多路基带信号调制到不同载波，叠加形成复合信号
	- 每个子信道带宽可以不同，但和不能超过总带宽
	- 防止信号干扰，加入“保护频带”
	- 充分利用带宽，系统利用率高
- TDM（时分多路复用 - 分时间片）
	- 每个时间片一个信号占用
	- 某个时刻只有一对设备之间的信号在信道上
	- 衍生出STDM（异步～），动态按需分派
- WDM（波分多路复用 - 光的不同频率）
	- 本质是光的频分多路复用
- CDM（码分多路复用 - ）
	- 采用不同编码区分各路信号
	- 既共享信道频率，又共享时间
	- 码分多址（CDMA）：每bit分为64或128个码片，每个站点有唯一的码片序列
		- 发送1时，发送码片序列
		- 发送0时，发送反码片序列
		- 信道中将同时发送的站点的数据线性相加
		- 要求：各站点码片相互正交

### 随机访问介质控制协议
又称争用型协议，其实质是将广播信道转化为点对点信道的行为
#### ALOHA协议
- 纯ALOHA协议
	- 想发就发，一段时间未收到确认，即认为发生冲突
	- 冲突可能出现在整个发送过程
	- 冲突危险期：2t
	- 信道利用率：18.4%
- 时隙ALOHA协议
	- 只能在时间片开始发送
	- 开始时没有冲突则不会发生冲突
	- 冲突危险期：t
	- 信道利用率：36.8%
- 时隙ALOHA协议信道利用率是纯ALOHA协议的两倍

#### CSMA协议
- 载波侦听多路访问协议
- “先听后发”

**非持续式**
- 监听，如果信道占用，则放弃监听，等待一个随机时间重新监听
- 信道利用率的提高是以增加数据在网络中的延迟时间为代价的

**持续式**
一直监听
- 1-持续
	- 只要监听到信道空闲即发送
- p-持续（用于时分信道）
	- 监听到信道空闲后以一个概率p发送，以1-p推迟到下一个时隙
	- 使用“持续”是为了降低非坚持CSMA中由于随机等待带来的延迟时间
	- 使用概率p是减少冲突
	- p-持续相当于1-持续和非持续的折中


#### CSMA/CD和CSMA/CA
- **CSMA/CD** - 有线局域网
	- 带冲突检测的载波侦听多路访问协议
	- 1-持续的CSMA
	- “先听后发，边发边听，冲突停发，随机重发”
	- `半双工以太网和总线型网络`中使用


> ```最小帧长 = 总线传播时延*数据传输速率*2```


- **冲突窗口**：冲突危险期，数值上 = 信号在最远两个工作站的传输延迟的两倍，
	- 以太网规定冲突争用期为51.2μs
	- 最小帧长为64B
	- 若帧不满64B，在MAC子层中，在数据字段之后添加填充字符

- **冲突检测**
	- 为了发送完帧之前就能收到自己的发送的数据，由于检测冲突，因此任何数据帧都需要大于最小帧长，否则视为无效帧丢弃
	- 采用二进制指数退避算法解决碰撞

- **CSMA/CA** - 无线局域网
	- 这里不再是“碰撞检测”，而是“碰撞避免”，尽可能的降低碰撞发生的概率
	- 避免碰撞的手段
		- 二进制指数退避算法
		- ACK帧：所有站点正确接收发给自己的数据帧时，需向发送方返回ACK帧，若未收到，即视为发送失败
		- 预约信道：告知其他站点自己传输数据需要的时间长度
		- RTS/CTS帧：可选项，用于解决“隐蔽站”的问题

- **CSMA/CD和CSMA/CA的对比**
	- CSMA/CD检测冲突但不能避免，CSMA/CA可尽量避免，但无法检测
	- 传输介质
	- 检测方式：CSMA/CD采用电缆中的电压变化检测；CSMA/CA用能量检测、载波检测、能量载波混合检测
	- 此结点不发生冲突不意味着其他的结点也没有冲突
	- 基本思想：
		- CSMA/CA协议：发送数据时先广播，以免碰撞，CSMA/CD先听后发，边听边发











